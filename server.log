[0m[32mTask[0m [0m[36mstart[0m deno run --allow-net --allow-read --allow-env --unstable-kv --unstable-cron main.js
ðŸš€ IMS Shopfront - Starting...

ðŸ“‹ Environment: local
ðŸ”§ Registering infrastructure contexts...
ðŸ—ï¸  Registering domain contexts...
âš™ï¸  Initializing contexts...
[SUCCESS] All contexts initialized {
  contexts: [
    "infra.persistence",
    "infra.messaging",
    "infra.obs",
    "infra.security",
    "infra.realtime",
    "domain.access-control",
    "domain.inventory",
    "domain.orders",
    "domain.catalog",
    "domain.procurement",
    "domain.manufacturing",
    "domain.system",
    "domain.observability",
    "domain.communication",
    "domain.scheduler",
    "domain.queries"
  ],
  initOrder: [
    "infra.persistence",
    "infra.messaging",
    "infra.obs",
    "infra.security",
    "infra.realtime",
    "domain.access-control",
    "domain.inventory",
    "domain.orders",
    "domain.catalog",
    "domain.procurement",
    "domain.manufacturing",
    "domain.system",
    "domain.observability",
    "domain.communication",
    "domain.scheduler",
    "domain.queries"
  ]
}
â° Starting Scheduler Ticker...
ðŸŒ Creating HTTP server...
[INFO] Server starting on port 8000 {}

âœ¨ Server ready!
   ðŸ”— UI:  http://localhost:8000/
   ðŸ”— API: http://localhost:8000/api
   ðŸ”— Health: http://localhost:8000/health

[INFO] [CancelStaleOrders] Scanning for stale CREATED orders > 48h... {}
[INFO] [ComputeLTV] Recomputing Customer Lifetime Value (LTV)... {}
[INFO] [ComputeLTV] Aggregating order history... {}
[INFO] [InventorySnapshot] Taking daily inventory snapshot... {}
[INFO] [PaymentReminders] Sending payment reminders for orders > 24h... {}
[INFO] [CheckPendingPOs] Checking for delayed Purchase Orders... {}
[INFO] [CheckPendingPOs] Scanning pending POs... {}
[INFO] [SyncSearchIndex] Starting search index synchronization... {}
[INFO] [CheckOverdueWOs] Checking for overdue Work Orders... {}
[INFO] [DBBackup] Initiating full KV backup... {}
[INFO] [DBBackup] Exporting tables: users, products, orders, logs... {}
[INFO] [CheckLowStock] Checking for low stock items... {}
[INFO] [CleanupAuditLogs] Starting audit log cleanup... {}
[INFO] [CleanupAuditLogs] Retention policy: 90 days {}
[INFO] [CheckPendingPOs] All POs within expected delivery windows. {}
[INFO] [SyncSearchIndex] Fetched 2450 products from DB. {}
[INFO] [CleanupAuditLogs] Cleanup complete. {}
[INFO] [SyncSearchIndex] Analyzing keywords... {}
[INFO] [DBBackup] Compression complete. Archive size: 131MB {}
[INFO] [DBBackup] Upload to S3 (Mock) complete. {}
[INFO] [SyncSearchIndex] Index updated. Stats: 2450 docs, 15000 tokens. {}
[INFO] [InventorySnapshot] Taking daily inventory snapshot... {}
[INFO] [CancelStaleOrders] Scanning for stale CREATED orders > 48h... {}
[INFO] [CheckPendingPOs] Checking for delayed Purchase Orders... {}
[INFO] [CheckPendingPOs] Scanning pending POs... {}
[INFO] [ComputeLTV] Recomputing Customer Lifetime Value (LTV)... {}
[INFO] [ComputeLTV] Aggregating order history... {}
[INFO] [CheckOverdueWOs] Checking for overdue Work Orders... {}
[INFO] [SyncSearchIndex] Starting search index synchronization... {}
[INFO] [CleanupAuditLogs] Starting audit log cleanup... {}
[INFO] [CleanupAuditLogs] Retention policy: 90 days {}
[INFO] [DBBackup] Initiating full KV backup... {}
[INFO] [DBBackup] Exporting tables: users, products, orders, logs... {}
[INFO] [PaymentReminders] Sending payment reminders for orders > 24h... {}
[INFO] [CheckLowStock] Checking for low stock items... {}
[INFO] [CheckPendingPOs] All POs within expected delivery windows. {}
[INFO] [SyncSearchIndex] Fetched 2450 products from DB. {}
[INFO] [CleanupAuditLogs] Cleanup complete. {}
[INFO] [SyncSearchIndex] Analyzing keywords... {}
[INFO] [DBBackup] Compression complete. Archive size: 123MB {}
[INFO] [DBBackup] Upload to S3 (Mock) complete. {}
[INFO] [SyncSearchIndex] Index updated. Stats: 2450 docs, 15000 tokens. {}
[INFO] [InventorySnapshot] Taking daily inventory snapshot... {}
[INFO] [CheckLowStock] Checking for low stock items... {}
[INFO] [DBBackup] Initiating full KV backup... {}
[INFO] [DBBackup] Exporting tables: users, products, orders, logs... {}
[INFO] [CancelStaleOrders] Scanning for stale CREATED orders > 48h... {}
[INFO] [CleanupAuditLogs] Starting audit log cleanup... {}
[INFO] [CleanupAuditLogs] Retention policy: 90 days {}
[INFO] [PaymentReminders] Sending payment reminders for orders > 24h... {}
[INFO] [ComputeLTV] Recomputing Customer Lifetime Value (LTV)... {}
[INFO] [ComputeLTV] Aggregating order history... {}
[INFO] [CheckPendingPOs] Checking for delayed Purchase Orders... {}
[INFO] [CheckPendingPOs] Scanning pending POs... {}
[INFO] [SyncSearchIndex] Starting search index synchronization... {}
[INFO] [CheckOverdueWOs] Checking for overdue Work Orders... {}
[INFO] [CheckPendingPOs] All POs within expected delivery windows. {}
[INFO] [CleanupAuditLogs] Cleanup complete. {}
[INFO] [SyncSearchIndex] Fetched 2450 products from DB. {}
[INFO] [DBBackup] Compression complete. Archive size: 113MB {}
[INFO] [DBBackup] Upload to S3 (Mock) complete. {}
[INFO] [SyncSearchIndex] Analyzing keywords... {}
[INFO] [SyncSearchIndex] Index updated. Stats: 2450 docs, 15000 tokens. {}
[INFO] [ComputeLTV] Recomputing Customer Lifetime Value (LTV)... {}
[INFO] [ComputeLTV] Aggregating order history... {}
[INFO] [CancelStaleOrders] Scanning for stale CREATED orders > 48h... {}
[INFO] [DBBackup] Initiating full KV backup... {}
[INFO] [DBBackup] Exporting tables: users, products, orders, logs... {}
[INFO] [PaymentReminders] Sending payment reminders for orders > 24h... {}
[INFO] [CheckPendingPOs] Checking for delayed Purchase Orders... {}
[INFO] [CheckPendingPOs] Scanning pending POs... {}
[INFO] [SyncSearchIndex] Starting search index synchronization... {}
[INFO] [CheckOverdueWOs] Checking for overdue Work Orders... {}
[INFO] [InventorySnapshot] Taking daily inventory snapshot... {}
[INFO] [CleanupAuditLogs] Starting audit log cleanup... {}
[INFO] [CleanupAuditLogs] Retention policy: 90 days {}
[INFO] [CheckLowStock] Checking for low stock items... {}
[INFO] [CheckPendingPOs] All POs within expected delivery windows. {}
[INFO] [SyncSearchIndex] Fetched 2450 products from DB. {}
[INFO] [CleanupAuditLogs] Cleanup complete. {}
[INFO] [DBBackup] Compression complete. Archive size: 115MB {}
[INFO] [DBBackup] Upload to S3 (Mock) complete. {}
[INFO] [SyncSearchIndex] Analyzing keywords... {}
[INFO] [SyncSearchIndex] Index updated. Stats: 2450 docs, 15000 tokens. {}
[INFO] [InventorySnapshot] Taking daily inventory snapshot... {}
[INFO] [CancelStaleOrders] Scanning for stale CREATED orders > 48h... {}
[INFO] [DBBackup] Initiating full KV backup... {}
[INFO] [DBBackup] Exporting tables: users, products, orders, logs... {}
[INFO] [PaymentReminders] Sending payment reminders for orders > 24h... {}
[INFO] [ComputeLTV] Recomputing Customer Lifetime Value (LTV)... {}
[INFO] [ComputeLTV] Aggregating order history... {}
[INFO] [CheckLowStock] Checking for low stock items... {}
[INFO] [CheckPendingPOs] Checking for delayed Purchase Orders... {}
[INFO] [CheckPendingPOs] Scanning pending POs... {}
[INFO] [SyncSearchIndex] Starting search index synchronization... {}
[INFO] [CheckOverdueWOs] Checking for overdue Work Orders... {}
[INFO] [CleanupAuditLogs] Starting audit log cleanup... {}
[INFO] [CleanupAuditLogs] Retention policy: 90 days {}
[INFO] [CheckPendingPOs] All POs within expected delivery windows. {}
[INFO] [SyncSearchIndex] Fetched 2450 products from DB. {}
[INFO] [CleanupAuditLogs] Cleanup complete. {}
[INFO] [DBBackup] Compression complete. Archive size: 113MB {}
[INFO] [DBBackup] Upload to S3 (Mock) complete. {}
[INFO] [SyncSearchIndex] Analyzing keywords... {}
[INFO] [SyncSearchIndex] Index updated. Stats: 2450 docs, 15000 tokens. {}
